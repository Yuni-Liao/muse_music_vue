export default {
    data() {
        return {
            items: [
                {
                    id: 1,
                    kind: '所有商品',
                    link: '#'
                },
                {
                    id: 2,
                    kind: '黑膠唱片',
                    link: '#'
                },
                {
                    id: 3,
                    kind: '男藝人',
                    link: '#'
                },
                {
                    id: 4,
                    kind: '女藝人',
                    link: '#'
                },
                {
                    id: 5,
                    kind: '樂團團體',
                    link: '#'
                }
            ],
            products: [
                {
                    id: 1,
                    prodPic: "prod1.jpg",
                    prodName: "Killbeast 黑膠",
                    prodPrice: 990,
                    inCart: 0,
                    date: "2023-01-01",
                    kind: "女藝人黑膠唱片",
                },
                {
                    id: 2,
                    prodPic: "prod2.jpg",
                    prodName: "西城男人 黑膠",
                    prodPrice: 990,
                    inCart: 0,
                    date: "2023-01-02",
                    kind: "男藝人樂團團體黑膠唱片",
                },
                {
                    id: 3,
                    prodPic: "prod3.jpg",
                    prodName: "Party Time 黑膠",
                    prodPrice: 990,
                    inCart: 0,
                    date: "2023-01-03",
                    kind: "樂團團體黑膠唱片",
                },
                {
                    id: 4,
                    prodPic: "prod4.jpg",
                    prodName: "Rose 黑膠",
                    prodPrice: 990,
                    inCart: 0,
                    date: "2023-01-04",
                    kind: "女藝人黑膠唱片",
                },
                {
                    id: 5,
                    prodPic: "prod5.jpg",
                    prodName: "Over Over 黑膠",
                    prodPrice: 990,
                    inCart: 0,
                    date: "2023-01-05",
                    kind: "女藝人黑膠唱片",
                },
                {
                    id: 6,
                    prodPic: "prod6.jpg",
                    prodName: "Blackmage 黑膠",
                    prodPrice: 990,
                    inCart: 0,
                    date: "2023-01-06",
                    kind: "樂團團體黑膠唱片",
                },
                {
                    id: 7,
                    prodPic: "prod7.jpg",
                    prodName: "KKOCK 黑膠",
                    prodPrice: 990,
                    inCart: 0,
                    date: "2023-01-07",
                    kind: "女藝人黑膠唱片",
                },
                {
                    id: 8,
                    prodPic: "prod1.jpg",
                    prodName: "cillbeast 黑膠",
                    prodPrice: 990,
                    inCart: 0,
                    date: "2023-01-08",
                    kind: "女藝人黑膠唱片",
                },
                {
                    id: 9,
                    prodPic: "prod2.jpg",
                    prodName: "東城男子 黑膠",
                    prodPrice: 990,
                    inCart: 0,
                    date: "2023-01-09",
                    kind: "男藝人樂團團體黑膠唱片",
                },
                {
                    id: 10,
                    prodPic: "prod3.jpg",
                    prodName: "Sleep Time 黑膠",
                    prodPrice: 990,
                    inCart: 0,
                    date: "2023-01-10",
                    kind: "樂團團體黑膠唱片",
                },
                {
                    id: 11,
                    prodPic: "prod4.jpg",
                    prodName: "Lisa 黑膠",
                    prodPrice: 990,
                    inCart: 0,
                    date: "2023-01-11",
                    kind: "女藝人黑膠唱片",
                },
                {
                    id: 12,
                    prodPic: "prod5.jpg",
                    prodName: "Very Very 黑膠",
                    prodPrice: 990,
                    inCart: 0,
                    date: "2023-01-12",
                    kind: "女藝人黑膠唱片",
                },
                {
                    id: 13,
                    prodPic: "prod6.jpg",
                    prodName: "Pinkmage 黑膠",
                    prodPrice: 990,
                    inCart: 0,
                    date: "2023-01-13",
                    kind: "樂團團體黑膠唱片",
                },
                {
                    id: 14,
                    prodPic: "prod7.jpg",
                    prodName: "VVOCK 黑膠",
                    prodPrice: 990,
                    inCart: 0,
                    date: "2023-01-14",
                    kind: "女藝人黑膠唱片",
                },
                {
                    id: 15,
                    prodPic: "prod1.jpg",
                    prodName: "Drop beast 黑膠",
                    prodPrice: 990,
                    inCart: 0,
                    date: "2023-01-15",
                    kind: "女藝人黑膠唱片",
                },
                {
                    id: 16,
                    prodPic: "prod2.jpg",
                    prodName: "北區女孩 黑膠",
                    prodPrice: 990,
                    inCart: 0,
                    date: "2023-01-16",
                    kind: "女藝人樂團團體黑膠唱片",
                },
                {
                    id: 17,
                    prodPic: "prod3.jpg",
                    prodName: "Show Time 黑膠",
                    prodPrice: 990,
                    inCart: 0,
                    date: "2023-01-17",
                    kind: "樂團團體黑膠唱片",
                },
                {
                    id: 18,
                    prodPic: "prod4.jpg",
                    prodName: "Jisso 黑膠",
                    prodPrice: 990,
                    inCart: 0,
                    date: "2023-01-18",
                    kind: "女藝人黑膠唱片",
                },
                {
                    id: 19,
                    prodPic: "prod5.jpg",
                    prodName: "Money Money 黑膠",
                    prodPrice: 990,
                    inCart: 0,
                    date: "2023-01-19",
                    kind: "女藝人黑膠唱片",
                },
                {
                    id: 20,
                    prodPic: "prod6.jpg",
                    prodName: "Bluemage 黑膠",
                    prodPrice: 990,
                    inCart: 0,
                    date: "2023-01-20",
                    kind: "樂團團體黑膠唱片",
                }
            ],
            //郭凱芸 - 以下是自己打的顯示數量下拉選單 先不要刪除
            // perPageOptions: {
            //     '每頁顯示20個': 20,
            //     '每頁顯示16個': 16,
            //     '每頁顯示12個': 12,
            //     '每頁顯示8個': 8,
            // },
            // selectedPerPage: '每頁顯示20個',

            //郭凱芸 - 改不了下拉選單內的簡體字
            pageTexts: {
                '20': '每頁顯示20個',
                '16': '每頁顯示16個',
                '12': '每頁顯示12個',
                '8': '每頁顯示8個',
            },
            selectedPageSize: 20,
            currentPage: 1,
            typeOptions: [
                '商品排序',
                '上架時間(新>舊)',
                '上架時間(舊>新)',
                '價格:由高到低',
                '價格:由低到高',
            ],
            selectedType: '商品排序',
        }
    },
    computed: {
        //郭凱芸 - 下拉數量選單:計算商品數量
        displayedProducts() {
            //計算商品數量
            const startIdx = (this.currentPage - 1) * this.selectedPerPage;
            const endIdx = startIdx + this.selectedPerPage;

            //取得對應範圍商品
            return this.products.slice(startIdx, endIdx);
        },

        sortedTypeOptions() {
            // 克隆原始的typeOptions数组
            const sortedOptions = [...this.typeOptions];
            // 移除第一个选项（'商品排序'）
            sortedOptions.shift();
            // 根据选择的排序方式重新排序选项
            if (this.selectedType === '上架時間(新>舊)') {
                sortedProducts.sort((a, b) => new Date(b.date) - new Date(a.date));
            } else if (this.selectedType === '上架時間(舊>新)') {
                sortedProducts.sort((a, b) => new Date(a.date) - new Date(b.date));
            } else if (this.selectedType === '價格:由高到低') {
                sortedProducts.sort((a, b) => b.prodPrice - a.prodPrice);
            } else if (this.selectedType === '價格:由低到高') {
                sortedProducts.sort((a, b) => a.prodPrice - b.prodPrice);
            }
            // 將第一个选项（'商品排序'）重新添加到已排序的选项数组开头
            sortedOptions.unshift(this.typeOptions[0]);
            return sortedOptions;
        }
        // mounted() {
        //     //最一開始初始化
        //     fetch('https://fakestoreapi.com/products')
        //     // .then(res=>res.json())
        //     .then(res=>{
        //         return res.json()
        //     })
        //     .then(json=>{
        //         this.products = json
        //         this.productDisplay = json
        //     })
        // }
    },
    methods: {
        // 增加商品数量
        incrementItem(item) {
            if (item.inCart >= 0) {
                item.inCart++;
            }
        },
        // 减少商品数量
        decrementItem(item) {
            if (item.inCart > 0) {
                item.inCart--;
            }
        },
    },
    // 郭凱芸 - 以下想做分頁顯示商品數量 但是失敗
    handlePageChange(page) {
        this.currentPage = page;
        // 算出起始跟結束頁面
        const startIndex = (page - 1) * this.pageSize;
        const endIndex = page * this.pageSize;
        // 要顯示的產品數量
        this.displayedProducts = this.products.slice(startIndex, endIndex);
    },
    created() {
        // 顯示第一頁商品數量
        this.displayedProducts = this.products.slice(0, this.pageSize);
    }
}